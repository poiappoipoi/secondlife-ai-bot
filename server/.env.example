# Server Configuration
PORT=3000

# AI Provider (xai | ollama)
AI_PROVIDER=xai
AI_MAX_TOKENS=300
AI_TIMEOUT_MS=30000

# X.AI (Grok) Configuration
XAI_API_KEY=your-xai-api-key-here
XAI_MODEL=grok-4-1-fast-non-reasoning

# Ollama Configuration (local LLM)
OLLAMA_BASE_URL=http://localhost:11434/v1
OLLAMA_MODEL=huihui_ai/qwen2.5-abliterate

# Rate Limiting
RATE_LIMIT_MAX=40
RATE_LIMIT_WINDOW_MS=3600000

# Conversation Settings
INACTIVITY_TIMEOUT_MS=3600000
CONVERSATION_MAX_HISTORY_MESSAGES=50

# Context Budget Management
CONTEXT_BUDGET_ENABLED=false
CONTEXT_MAX_TOKENS=8000
CONTEXT_SYSTEM_PROMPT_MAX_PERCENT=80

# Memory System (Keyword-Activated Memory Injection)
MEMORY_ENABLED=true
MEMORY_TOKEN_BUDGET=500

# Persona Settings
PERSONA_FILE=cat-maid.md
# PERSONAS_DIR=./personas

# Logging
LOG_LEVEL=INFO
LOG_TIMEZONE=UTC

# NPC State Machine (Selective Response Behavior)
NPC_ENABLED=true
NPC_TICK_INTERVAL_MS=1000

# State Timeouts (milliseconds)
NPC_LISTENING_TIMEOUT_MS=15000
NPC_THINKING_TIMEOUT_MS=30000
NPC_SPEAKING_COOLDOWN_MS=5000

# Message Buffer Configuration
NPC_BUFFER_MAX_PER_AVATAR=10
NPC_BUFFER_MAX_TOTAL_SIZE=50
NPC_BUFFER_AGGREGATION_WINDOW_MS=5000
NPC_BUFFER_EXPIRY_MS=60000

# Decision Layer Configuration
NPC_RESPONSE_THRESHOLD=50
NPC_RESPONSE_CHANCE=0.8
NPC_TRIGGER_WORDS=maid,cat-maid,kitty

# Priority Scoring Weights
NPC_SCORE_DIRECT_MENTION=100
NPC_SCORE_RECENT_INTERACTION=30
NPC_SCORE_MESSAGE_COUNT_MULT=5
NPC_SCORE_CONSECUTIVE_BONUS=10
NPC_SCORE_MAX_TIME_DECAY=20
NPC_SCORE_TIME_DECAY_RATE=2
NPC_SCORE_RANDOMNESS_RANGE=10

# Per-Avatar Cooldown
NPC_AVATAR_COOLDOWN_MS=2000
